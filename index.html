<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="theme-color" content="#222"/>
  <title>Music player v2</title>

  <link rel="stylesheet" href="index.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css" />
  <link rel="icon" href="https://d1yjjnpx0p53s8.cloudfront.net/pp840x830-pad1000x1000f8f8f8.jpg?9oPTJs..erd0K9tiddIL4J9OjiCfetIN" />
</head>
<body>

  <!-- Music Player -->
  <div class="container" id="musicPlayer">
    <div class="player card">
      <div class="wrapper">
        <div class="details">
          <div class="track-art">
            <div class="cover"></div>
          </div>
          <a class="track-name" href="#" target="_blank">Track Name</a>
          <a class="track-artist" href="#" target="_blank">Track Artist</a>
        </div>

        <div class="slider_container">
          <div class="current-time">00:00</div>
          <input type="range" min="0" max="100" value="0" class="seek_slider" />
          <div class="total-duration">00:00</div>
        </div>

        <div class="slider_container">
          <i class="fa fa-volume-down"></i>
          <input type="range" min="0" max="100" value="99" class="volume_slider" />
          <i class="fa fa-volume-up"></i>
        </div>

        <div class="now-playing">PLAYING x OF y</div>

        <div class="buttons">
          <div class="random-track" title="Random">
            <i class="fas fa-random fa-2x"></i>
          </div>
          <div class="prev-track" title="Previous">
            <i class="fa fa-step-backward fa-2x"></i>
          </div>
          <div class="playpause-track" title="Play/Pause">
            <i class="fa fa-play-circle fa-5x"></i>
          </div>
          <div class="next-track" title="Next">
            <i class="fa fa-step-forward fa-2x"></i>
          </div>
          <div class="repeat-track" title="Repeat">
            <i class="fas fa-redo fa-2x"></i>
          </div>
        </div>
      </div>
      
      <div id="wave" class="loader">
        <span class="stroke"></span>
        <span class="stroke"></span>
        <span class="stroke"></span>
        <span class="stroke"></span>
        <span class="stroke"></span>
        <span class="stroke"></span>
        <span class="stroke"></span>
      </div>
    </div>

    <img src="images/normal-cupid.png" alt="Flipped Cupid" class="cupid cupid-music-player" loading="lazy" decoding="async" width="200" height="200">
  </div>

  <!-- Footer -->
  <div class="footer" id="footer">
    <a href="https://github.com/jag-proj3ct/jag-proj3ct.github.io/tree/main">Source</a>
    <a href="#">Actual Teacher Voting</a> 
    <a href="license.html">License and Copyright</a>
    <a href="./html/bloopers.html">Bloopers</a>
    <a href="#">Version:0.9.9.3</a>
  </div>

  <!-- Scripts -->
  <script>
    // Only fetch votes, no voting
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyx1pB3AbeDIaWFxDANrrEWY2NkgNmRYB3k_aNR109pR5aEVExaWniEc5-oZ0D2xy6FXw/exec";
    const votesDisplay = document.getElementById("currentVotes");

    async function fetchVotes() {
      try {
        const response = await fetch(SCRIPT_URL + "?cb=" + Date.now());
        const count = await response.text();
        votesDisplay.textContent = isNaN(parseInt(count)) ? "error" : count;
      } catch (err) {
        votesDisplay.textContent = "error";
      }
    }

    // Load once + refresh every 5s
    fetchVotes();
    setInterval(fetchVotes, 5000);
  </script>
  
  <script src="js/music-player.js" defer></script>
  <script src="js/404.js" defer></script> 
</body>
</html>
